/* Form Component Styles */

/* Base input styles - Mobile-optimized */
input {
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text-main);
  border-radius: var(--radius-md);
  padding: var(--spacing-md) var(--spacing-lg);
  transition: border-color var(--transition-fast);
  outline: none;
  font-family: var(--font-body);

  /* Touch-friendly sizing - match category chips */
  min-height: var(--touch-target-standard);
  height: var(--touch-target-standard);

  /* Mobile input optimizations */
  appearance: none;
  appearance: none;
  appearance: none;

  /* Prevent zoom on focus (iOS) */
  font-size: max(var(--font-size-prevent-zoom), var(--font-size-base));

  /* Touch optimizations */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

input:hover {
  border-color: var(--color-text-muted);
}

input:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.1);
}

/* Specific input types for mobile */
input[type='date'] {
  color-scheme: dark;
  min-height: var(--touch-target-standard);
  height: var(--touch-target-standard);
}

/* Remove Arrows from Number Input */
input[type='number']::-webkit-inner-spin-button,
input[type='number']::-webkit-outer-spin-button {
  appearance: none;
  margin: 0;
}

input[type='number'] {
  appearance: textfield;
  appearance: textfield;
}

/* Select elements - Touch-optimized */
select.input-select {
  min-height: var(--touch-target-standard); /* Match category chip height */
  height: var(
    --touch-target-standard
  ); /* Fixed height to match category chips exactly */

  padding: var(--spacing-md);
  font-size: max(var(--font-size-prevent-zoom), var(--font-size-base));
  /* Prevent iOS zoom */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  color: var(--color-text-main);
  border-radius: var(--radius-md);
  font-family: var(--font-body);
  transition: border-color var(--transition-fast);
  outline: none;
}

/* Enhanced focus states for touch */
select.input-select:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.1);
  outline: none;
}

/* Mobile Form Styles - Unified styling for all form elements */
.mobile-form-input,
.mobile-form-select {
  width: 100%;
  min-height: var(--touch-target-standard); /* Match category chip height */
  height: var(
    --touch-target-standard
  ); /* Fixed height to match category chips exactly */

  font-size: max(
    var(--font-size-prevent-zoom),
    var(--font-size-base)
  ); /* Prevent zoom on iOS */

  padding: var(--spacing-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-text-main);
  transition: all var(--transition-fast);
  font-family: var(--font-body);
  outline: none;
  box-sizing: border-box;

  /* Mobile optimizations */
  appearance: none;
  appearance: none;
  appearance: none;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.mobile-form-input:hover,
.mobile-form-select:hover {
  border-color: var(--color-text-muted);
}

.mobile-form-input:focus,
.mobile-form-select:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.1);
  outline: none;
}

/* Ensure select elements have proper styling */
.mobile-form-select {
  cursor: pointer;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23a1a1aa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right var(--spacing-md) center;
  background-size: 16px;
  padding-right: calc(var(--spacing-md) + 24px); /* Make room for arrow */
}

/* Mobile add account form */
.mobile-add-account-form {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
  margin-top: var(--spacing-md);
}

/* Mobile Date Range Form */
.mobile-date-range-form {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-lg);
}

.mobile-date-input-wrapper {
  width: 100%;
}

.mobile-date-input-wrapper label {
  display: block;
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--color-text-muted);
  margin-bottom: var(--spacing-xs);
}

/* Transaction Date Input Enhancements */
.view-add .mobile-form-input[aria-label*='Transaction date'],
.view-edit .mobile-form-input[aria-label*='Transaction date'] {
  /* Subtle visual connection to form */
  border-color: var(--color-primary-light);
  background: var(--color-surface);
  position: relative;
}

.view-add .mobile-form-input[aria-label*='Transaction date']:hover,
.view-edit .mobile-form-input[aria-label*='Transaction date']:hover {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.1);
}

.view-add .mobile-form-input[aria-label*='Transaction date']:focus,
.view-edit .mobile-form-input[aria-label*='Transaction date']:focus {
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.15);
  outline: none;
}

/* Date input label styling */
.view-add label[for*='date-input'],
.view-edit label[for*='date-input'] {
  font-size: var(--font-size-xs);
  color: var(--color-text-muted);
  font-weight: 500;
  text-align: center;
  margin-bottom: var(--spacing-xs);
  opacity: 0.8;
  transition: opacity var(--transition-fast);
}

/* Enhanced visual feedback for date input interaction */
.view-add .mobile-form-input[aria-label*='Transaction date']::after,
.view-edit .mobile-form-input[aria-label*='Transaction date']::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 2px;
  background: var(--color-primary);
  transition: width var(--transition-fast);
}

.view-add .mobile-form-input[aria-label*='Transaction date']:hover::after,
.view-edit .mobile-form-input[aria-label*='Transaction date']:hover::after,
.view-add .mobile-form-input[aria-label*='Transaction date']:focus::after,
.view-edit .mobile-form-input[aria-label*='Transaction date']:focus::after {
  width: 80%;
}

/* Transaction form mobile optimizations */
.transaction-form.mobile-optimized {
  /* Optimize for thumb reach on mobile */
  width: 100%;

  /* Ensure form takes full width */
  @media (width <= 767px) {
    min-height: calc(var(--visual-viewport-height) - 120px);
    justify-content: flex-end;
  }
}

/* Ensure inputs in transaction form are always full width */
.transaction-form input,
.transaction-form select,
.transaction-form .input-select {
  width: 100% !important;
  /* Force full width to match container */
  max-width: 100%;
  box-sizing: border-box;
}

/* Note: Category chip styles moved to mobile/touch.css to avoid duplication */

/* Keyboard-aware viewport adjustments */
body.keyboard-visible {
  /* Adjust layout when virtual keyboard is visible */
  --visual-viewport-height: var(--visual-viewport-height, 100vh);
}

body.keyboard-visible #app {
  /* Ensure content remains accessible above keyboard */
  min-height: var(--visual-viewport-height);
  padding-bottom: 0;
  /* Let individual components handle their spacing */
}

body.keyboard-visible .transaction-form {
  /* Ensure form content is accessible above keyboard */
  margin-bottom: 0;
  justify-content: flex-start !important;
  /* Move content to top when keyboard is open */
  padding-top: var(--spacing-md);
}

/* Note: Keyboard-visible category-chip-container styles moved to mobile/keyboard.css */

/* Enhanced input focus states for mobile keyboard interaction */
body.keyboard-visible input:focus,
body.keyboard-visible select:focus {
  /* Stronger focus indication when keyboard is active */
  border-color: var(--color-primary);
  box-shadow: 0 0 0 4px
    hsl(var(--primary-hue), var(--primary-sat), var(--primary-light), 0.15);
  transform: scale(1.02);
  transition: all var(--transition-fast);
}

/* Note: Category chip responsive styles moved to mobile/touch.css */

/* Responsive adjustments for forms */
@media (min-width: var(--breakpoint-md)) {
  .mobile-date-range-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-lg);
    align-items: end;
  }

  .mobile-date-input-wrapper:last-child {
    grid-column: span 2;
  }
}

/* Mobile-friendly focus states */
@media (width <= calc(var(--breakpoint-md) - 1px)) {
  input:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
  }
}

/* iOS specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari specific styles */
  input {
    /* Fix iOS input styling */
    appearance: none;
    appearance: none;
    border-radius: var(--radius-md);
  }

  /* Prevent iOS zoom on input focus */
  input[type='text'],
  input[type='number'],
  input[type='email'],
  input[type='tel'],
  input[type='date'],
  select,
  textarea {
    font-size: var(--font-size-prevent-zoom) !important;
  }
}

/* Android specific fixes */
@media screen and (min-device-pixel-ratio: 0) and (resolution >= .001dpcm) {
  /* Android Chrome specific styles */
  input:focus {
    /* Prevent Android zoom */
    font-size: var(--font-size-prevent-zoom);
  }
}

/* Dark mode optimizations for mobile */
@media (prefers-color-scheme: dark) {
  /* Already using dark theme, but ensure mobile-specific adjustments */
  input[type='date']::-webkit-calendar-picker-indicator {
    filter: invert(1);
  }
}
